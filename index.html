<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Air Ticket Management</title>
    <link rel="stylesheet" href="styles.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.4/dist/css/datepicker.min.css">
    <script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.4/dist/js/datepicker-full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.js"></script>
    
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>
</head>
<body>
    <div class="main-container">
        <header class="header">
            <div class="header-left">
                <i class="fa-solid fa-plane-departure logo-icon"></i>
                <h1 class="title">Ocean Air</h1>
            </div>
            <nav class="nav">
                <button class="nav-btn active" data-view="home"><i class="fa-solid fa-house"></i><span>Dashboard</span></button>
                <button class="nav-btn" data-view="sell"><i class="fa-solid fa-ticket"></i><span>Sell Ticket</span></button>
                <button class="nav-btn" data-view="modify"><i class="fa-solid fa-pen-to-square"></i><span>Modify Ticket</span></button>
                <button class="nav-btn" data-view="cancel"><i class="fa-solid fa-ban"></i><span>Cancel Ticket</span></button>
                <button class="nav-btn" data-view="booking"><i class="fa-solid fa-calendar-check"></i><span>Booking</span></button>
            </nav>
            <div class="header-right">
                <div class="settings-buttons">
                    <a href="https://docs.google.com/spreadsheets/d/1SGc80isz0VRVt447R_q-fBdZ_me52H_Z32W5HauHMWQ/edit" target="_blank" rel="noopener noreferrer" class="icon-btn" title="Open Google Sheet">
                        <i class="fa-solid fa-table-cells"></i>
                    </a>
                    <input type="file" id="background-uploader" accept="image/*" style="display: none;">
                    <button id="background-upload-btn" class="icon-btn" title="Change Background"><i class="fa-solid fa-image"></i></button>
                    <button id="background-reset-btn" class="icon-btn" title="Reset Background"><i class="fa-solid fa-trash-arrow-up"></i></button>
                    <button id="settings-btn" class="icon-btn" title="UI Settings"><i class="fa-solid fa-sliders"></i></button>
                </div>
                <div class="auth-buttons">
                    <button id="authorize_button" class="btn btn-primary" style="display: none;">Sign In</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section id="home-view" class="view active">
                <div class="loading-indicator" id="loading">
                    <div class="spinner"></div>
                    <p>Loading data...</p>
                </div>
                
                <div class="dashboard-content-wrapper" id="dashboard-content" style="display: none;">
                     <div class="info-grid">
                        <div id="total-tickets-box" class="info-card glass-card">
                             <div class="dashboard-controls">
                                <div class="date-selectors">
                                    <select id="dashboard-month"></select>
                                    <select id="dashboard-year"></select>
                                </div>
                            </div>
                            <div class="info-card-content">
                                <h3>Total Tickets</h3>
                                <div class="main-value" id="total-tickets-value"></div>
                                <i class="icon fa-solid fa-ticket-simple"></i>
                            </div>
                        </div>
                        <div id="monthly-revenue-box" class="info-card glass-card"></div>
                        <div id="monthly-commission-box" class="info-card glass-card"></div>
                        <div id="monthly-extra-fare-box" class="info-card glass-card"></div>
                        <div id="airline-chart-box" class="info-card chart-card glass-card">
                             <h3>Sales by Airline</h3>
                             <div class="chart-container">
                                <canvas id="airline-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="actions-grid">
                        <div class="search-section glass-card">
                            <h3><i class="fa-solid fa-magnifying-glass"></i> Search Tickets</h3>
                            <form id="searchForm" onsubmit="return false;">
                                <div class="search-inputs">
                                    <input type="text" id="searchName" placeholder="Client Name">
                                    <input type="text" id="searchBooking" placeholder="Booking Reference">
                                    <div class="date-range-group">
                                        <input type="text" id="searchStartDate" placeholder="Start Date">
                                        <input type="text" id="searchEndDate" placeholder="End Date">
                                    </div>
                                    <input type="text" id="searchTravelDate" placeholder="Travel Date (MM/DD/YYYY)">
                                    <select id="searchDeparture">
                                        <option value="" disabled selected>DEPARTURE</option>
                                        <option value="Ann (VBA)">Ann (VBA)</option>
                                        <option value="Anni Sakhan (VBK)">Anni Sakhan (VBK)</option>
                                        <option value="Bangalore (BLR)">Bangalore (BLR)</option>
                                        <option value="Bangkok (BKK)">Bangkok (BKK)</option>
                                        <option value="Bassein (BSX)">Bassein (BSX)</option>
                                        <option value="Bhamo (BMO)">Bhamo (BMO)</option>
                                        <option value="Bokpyin (VBP)">Bokpyin (VBP)</option>
                                        <option value="Brisbane (BNE)">Brisbane (BNE)</option>
                                        <option value="Busan (PUS)">Busan (PUS)</option>
                                        <option value="Chengdu (CTU)">Chengdu (CTU)</option>
                                        <option value="Chaing Mai (CNX)">Chaing Mai (CNX)</option>
                                        <option value="Coco Islands (VCC)">Coco Islands (VCC)</option>
                                        <option value="Colombo (CMB)">Colombo (CMB)</option>
                                        <option value="Cox's bazar (CXB)">Cox's bazar (CXB)</option>
                                        <option value="Dawei (TVY)">Dawei (TVY)</option>
                                        <option value="Denpasar (DPS)">Denpasar (DPS)</option>
                                        <option value="Dhaka (DAC)">Dhaka (DAC)</option>
                                        <option value="Fukuoka (FUK)">Fukuoka (FUK)</option>
                                        <option value="Gaya (GAY)">Gaya (GAY)</option>
                                        <option value="Haikou (HAK)">Haikou (HAK)</option>
                                        <option value="Hanoi (HAN)">Hanoi (HAN)</option>
                                        <option value="Heho (HEH)">Heho (HEH)</option>
                                        <option value="Ho Chi Minh City (SGN)">Ho Chi Minh City (SGN)</option>
                                        <option value="Hommalinn (HOX)">Hommalinn (HOX)</option>
                                        <option value="Hong Kong (HKG)">Hong Kong (HKG)</option>
                                        <option value="Incheon (ICN)">Incheon (ICN)</option>
                                        <option value="Jakarta (CGK)">Jakarta (CGK)</option>
                                        <option value="Kalemyo (KMV)">Kalemyo (KMV)</option>
                                        <option value="Kawtung (KET)">Kawtung (KET)</option>
                                        <option value="Khamti (KHM)">Khamti (KHM)</option>
                                        <option value="Kolkata (CCU)">Kolkata (CCU)</option>
                                        <option value="Krabi (KBV)">Krabi (KBV)</option>
                                        <option value="Kuala Lumpur (KUL)">Kuala Lumpur (KUL)</option>
                                        <option value="Kumming (KMG)">Kumming (KMG)</option>
                                        <option value="Kyaukpyu (KYP)">Kyaukpyu (KYP)</option>
                                        <option value="Lashio (LSH)">Lashio (LSH)</option>
                                        <option value="Loikaw (LIW)">Loikaw (LIW)</option>
                                        <option value="Mae Sot (MAQ)">Mae Sot (MAQ)</option>
                                        <option value="Manaung (MGU)">Manaung (MGU)</option>
                                        <option value="Mandalay (MDL)">Mandalay (MDL)</option>
                                        <option value="Mangrere (AKL)">Mangrere (AKL)</option>
                                        <option value="Mangshi (LUM)">Mangshi (LUM)</option>
                                        <option value="Manila (MNL)">Manila (MNL)</option>
                                        <option value="Mawlamyaing (MNU)">Mawlamyaing (MNU)</option>
                                        <option value="Melbourne (MEL)">Melbourne (MEL)</option>
                                        <option value="Monghsat (MOG)">Monghsat (MOG)</option>
                                        <option value="Monywa (NYW)">Monywa (NYW)</option>
                                        <option value="Mumbai (BOM)">Mumbai (BOM)</option>
                                        <option value="Myeik (MGZ)">Myeik (MGZ)</option>
                                        <option value="Myitkyina (MYT)">Myitkyina (MYT)</option>
                                        <option value="Nagoya (NGO)">Nagoya (NGO)</option>
                                        <option value="Naming (NMS)">Naming (NMS)</option>
                                        <option value="Nanning (NNG)">Nanning (NNG)</option>
                                        <option value="Nay Pyi Taw (NYT)">Nay Pyi Taw (NYT)</option>
                                        <option value="Nyaung U (NYU)">Nyaung U (NYU)</option>
                                        <option value="Phuket (HKT)">Phuket (HKT)</option>
                                        <option value="Putao (PBU)">Putao (PBU)</option>
                                        <option value="Siem Reap (SAI)">Siem Reap (SAI)</option>
                                        <option value="Singapore (SIN)">Singapore (SIN)</option>
                                        <option value="Sittwe (AKY)">Sittwe (AKY)</option>
                                        <option value="Subang (SZB)">Subang (SZB)</option>
                                        <option value="Surbung (SRU)">Surbung (SRU)</option>
                                        <option value="Sydney (SYD)">Sydney (SYD)</option>
                                        <option value="Tachilek (THL)">Tachilek (THL)</option>
                                        <option value="Taipei (TPE)">Taipei (TPE)</option>
                                        <option value="Thandwe (SNW)">Thandwe (SNW)</option>
                                        <option value="Tokyo - Narita (NRT)">Tokyo - Narita (NRT)</option>
                                        <option value="Vientiane (VTE)">Vientiane (VTE)</option>
                                        <option value="Xiamen (XMN)">Xiamen (XMN)</option>
                                        <option value="Yangon (RGN)">Yangon (RGN)</option>
                                    </select>
                                    <select id="searchDestination">
                                        <option value="" disabled selected>DESTINATION</option>
                                        <option value="Ann (VBA)">Ann (VBA)</option>
                                        <option value="Anni Sakhan (VBK)">Anni Sakhan (VBK)</option>
                                        <option value="Bangalore (BLR)">Bangalore (BLR)</option>
                                        <option value="Bangkok (BKK)">Bangkok (BKK)</option>
                                        <option value="Bassein (BSX)">Bassein (BSX)</option>
                                        <option value="Bhamo (BMO)">Bhamo (BMO)</option>
                                        <option value="Bokpyin (VBP)">Bokpyin (VBP)</option>
                                        <option value="Brisbane (BNE)">Brisbane (BNE)</option>
                                        <option value="Busan (PUS)">Busan (PUS)</option>
                                        <option value="Chengdu (CTU)">Chengdu (CTU)</option>
                                        <option value="Chaing Mai (CNX)">Chaing Mai (CNX)</option>
                                        <option value="Coco Islands (VCC)">Coco Islands (VCC)</option>
                                        <option value="Colombo (CMB)">Colombo (CMB)</option>
                                        <option value="Cox's bazar (CXB)">Cox's bazar (CXB)</option>
                                        <option value="Dawei (TVY)">Dawei (TVY)</option>
                                        <option value="Denpasar (DPS)">Denpasar (DPS)</option>
                                        <option value="Dhaka (DAC)">Dhaka (DAC)</option>
                                        <option value="Fukuoka (FUK)">Fukuoka (FUK)</option>
                                        <option value="Gaya (GAY)">Gaya (GAY)</option>
                                        <option value="Haikou (HAK)">Haikou (HAK)</option>
                                        <option value="Hanoi (HAN)">Hanoi (HAN)</option>
                                        <option value="Heho (HEH)">Heho (HEH)</option>
                                        <option value="Ho Chi Minh City (SGN)">Ho Chi Minh City (SGN)</option>
                                        <option value="Hommalinn (HOX)">Hommalinn (HOX)</option>
                                        <option value="Hong Kong (HKG)">Hong Kong (HKG)</option>
                                        <option value="Incheon (ICN)">Incheon (ICN)</option>
                                        <option value="Jakarta (CGK)">Jakarta (CGK)</option>
                                        <option value="Kalemyo (KMV)">Kalemyo (KMV)</option>
                                        <option value="Kawtung (KET)">Kawtung (KET)</option>
                                        <option value="Khamti (KHM)">Khamti (KHM)</option>
                                        <option value="Kolkata (CCU)">Kolkata (CCU)</option>
                                        <option value="Krabi (KBV)">Krabi (KBV)</option>
                                        <option value="Kuala Lumpur (KUL)">Kuala Lumpur (KUL)</option>
                                        <option value="Kumming (KMG)">Kumming (KMG)</option>
                                        <option value="Kyaukpyu (KYP)">Kyaukpyu (KYP)</option>
                                        <option value="Lashio (LSH)">Lashio (LSH)</option>
                                        <option value="Loikaw (LIW)">Loikaw (LIW)</option>
                                        <option value="Mae Sot (MAQ)">Mae Sot (MAQ)</option>
                                        <option value="Manaung (MGU)">Manaung (MGU)</option>
                                        <option value="Mandalay (MDL)">Mandalay (MDL)</option>
                                        <option value="Mangrere (AKL)">Mangrere (AKL)</option>
                                        <option value="Mangshi (LUM)">Mangshi (LUM)</option>
                                        <option value="Manila (MNL)">Manila (MNL)</option>
                                        <option value="Mawlamyaing (MNU)">Mawlamyaing (MNU)</option>
                                        <option value="Melbourne (MEL)">Melbourne (MEL)</option>
                                        <option value="Monghsat (MOG)">Monghsat (MOG)</option>
                                        <option value="Monywa (NYW)">Monywa (NYW)</option>
                                        <option value="Mumbai (BOM)">Mumbai (BOM)</option>
                                        <option value="Myeik (MGZ)">Myeik (MGZ)</option>
                                        <option value="Myitkyina (MYT)">Myitkyina (MYT)</option>
                                        <option value="Nagoya (NGO)">Nagoya (NGO)</option>
                                        <option value="Naming (NMS)">Naming (NMS)</option>
                                        <option value="Nanning (NNG)">Nanning (NNG)</option>
                                        <option value="Nay Pyi Taw (NYT)">Nay Pyi Taw (NYT)</option>
                                        <option value="Nyaung U (NYU)">Nyaung U (NYU)</option>
                                        <option value="Phuket (HKT)">Phuket (HKT)</option>
                                        <option value="Putao (PBU)">Putao (PBU)</option>
                                        <option value="Siem Reap (SAI)">Siem Reap (SAI)</option>
                                        <option value="Singapore (SIN)">Singapore (SIN)</option>
                                        <option value="Sittwe (AKY)">Sittwe (AKY)</option>
                                        <option value="Subang (SZB)">Subang (SZB)</option>
                                        <option value="Surbung (SRU)">Surbung (SRU)</option>
                                        <option value="Sydney (SYD)">Sydney (SYD)</option>
                                        <option value="Tachilek (THL)">Tachilek (THL)</option>
                                        <option value="Taipei (TPE)">Taipei (TPE)</option>
                                        <option value="Thandwe (SNW)">Thandwe (SNW)</option>
                                        <option value="Tokyo - Narita (NRT)">Tokyo - Narita (NRT)</option>
                                        <option value="Vientiane (VTE)">Vientiane (VTE)</option>
                                        <option value="Xiamen (XMN)">Xiamen (XMN)</option>
                                        <option value="Yangon (RGN)">Yangon (RGN)</option>
                                    </select>
                                    <select id="searchAirline">
                                        <option value="" disabled selected>AIRLINE</option>
                                        <option value="MNA">MNA</option><option value="MAI">MAI</option><option value="ManYadanarpon">ManYadanarpon</option><option value="AirThanwlin">AirThanwlin</option>
                                    </select>
                                    <div class="toggle-switch">
                                        <label for="searchNotPaidToggle" id="unpaid-only-label">Unpaid Only</label>
                                        <label class="switch">
                                            <input type="checkbox" id="searchNotPaidToggle">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                    <div class="toggle-switch">
                                        <label for="searchCurrentMonthToggle">Current Month Only</label>
                                        <label class="switch">
                                            <input type="checkbox" id="searchCurrentMonthToggle">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="search-buttons">
                                    <button id="searchBtn" class="btn btn-primary"><i class="fa-solid fa-search"></i> Search</button>
                                    <button id="clearBtn" class="btn btn-secondary"><i class="fa-solid fa-eraser"></i> Clear</button>
                                </div>
                            </form>
                        </div>

                        <div class="results-section glass-card">
                            <div class="results-header">
                                <h3>Search Results</h3>
                                <button id="exportPdfBtn" class="btn btn-secondary" title="Export Results to PDF">
                                    <i class="fa-solid fa-file-pdf"></i>
                                    <span>Export PDF</span>
                                </button>
                            </div>
                            <div class="table-container">
                                <table id="resultsTable">
                                    <thead>
                                        <tr>
                                            <th>Issued Date</th><th>Name</th><th>Booking Ref</th><th>Route</th><th>Airline</th><th>Details</th>
                                        </tr>
                                    </thead>
                                    <tbody id="resultsBody"></tbody>
                                </table>
                            </div>
                            <div id="pagination" class="pagination-container"></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="booking-view" class="view">
                <div id="booking-form-container" class="form-container glass-card" style="display: none;">
                    <h2><i class="fa-solid fa-calendar-plus"></i> New Booking Request</h2>
                    <form id="newBookingForm">
                        <div class="form-grid">
                           <div class="form-group"><label for="booking_name">Client Name</label><input type="text" id="booking_name" required></div>
                           <div class="form-group"><label for="booking_nrc_no">NRC Number</label><input type="text" id="booking_nrc_no"></div>
                           <div class="form-group"><label for="booking_phone">Phone</label><input type="tel" id="booking_phone"></div>
                           <div class="form-group"><label for="booking_account_name">Social Account Name</label><input type="text" id="booking_account_name"></div>
                           <div class="form-group"><label for="booking_account_type">Social Account Type</label><select id="booking_account_type"><option value="" disabled selected>Select Type</option><option value="Facebook Page">Facebook Page</option><option value="Messenger">Messenger</option><option value="Viber">Viber</option><option value="Telegram">Telegram</option><option value="WeChat">WeChat</option><option value="Phone">Phone</option></select></div>
                           <div class="form-group"><label for="booking_account_link">Account Link</label><input type="text" id="booking_account_link" placeholder="URL, phone or @username"></div>
                           <div class="form-group"><label for="booking_departure">Departure</label><select id="booking_departure" required><option value="" disabled selected>Select Departure</option>
                            <option value="Ann (VBA)">Ann (VBA)</option>
                            <option value="Anni Sakhan (VBK)">Anni Sakhan (VBK)</option>
                            <option value="Bangalore (BLR)">Bangalore (BLR)</option>
                            <option value="Bangkok (BKK)">Bangkok (BKK)</option>
                            <option value="Bassein (BSX)">Bassein (BSX)</option>
                            <option value="Bhamo (BMO)">Bhamo (BMO)</option>
                            <option value="Bokpyin (VBP)">Bokpyin (VBP)</option>
                            <option value="Brisbane (BNE)">Brisbane (BNE)</option>
                            <option value="Busan (PUS)">Busan (PUS)</option>
                            <option value="Chengdu (CTU)">Chengdu (CTU)</option>
                            <option value="Chaing Mai (CNX)">Chaing Mai (CNX)</option>
                            <option value="Coco Islands (VCC)">Coco Islands (VCC)</option>
                            <option value="Colombo (CMB)">Colombo (CMB)</option>
                            <option value="Cox's bazar (CXB)">Cox's bazar (CXB)</option>
                            <option value="Dawei (TVY)">Dawei (TVY)</option>
                            <option value="Denpasar (DPS)">Denpasar (DPS)</option>
                            <option value="Dhaka (DAC)">Dhaka (DAC)</option>
                            <option value="Fukuoka (FUK)">Fukuoka (FUK)</option>
                            <option value="Gaya (GAY)">Gaya (GAY)</option>
                            <option value="Haikou (HAK)">Haikou (HAK)</option>
                            <option value="Hanoi (HAN)">Hanoi (HAN)</option>
                            <option value="Heho (HEH)">Heho (HEH)</option>
                            <option value="Ho Chi Minh City (SGN)">Ho Chi Minh City (SGN)</option>
                            <option value="Hommalinn (HOX)">Hommalinn (HOX)</option>
                            <option value="Hong Kong (HKG)">Hong Kong (HKG)</option>
                            <option value="Incheon (ICN)">Incheon (ICN)</option>
                            <option value="Jakarta (CGK)">Jakarta (CGK)</option>
                            <option value="Kalemyo (KMV)">Kalemyo (KMV)</option>
                            <option value="Kawtung (KET)">Kawtung (KET)</option>
                            <option value="Khamti (KHM)">Khamti (KHM)</option>
                            <option value="Kolkata (CCU)">Kolkata (CCU)</option>
                            <option value="Krabi (KBV)">Krabi (KBV)</option>
                            <option value="Kuala Lumpur (KUL)">Kuala Lumpur (KUL)</option>
                            <option value="Kumming (KMG)">Kumming (KMG)</option>
                            <option value="Kyaukpyu (KYP)">Kyaukpyu (KYP)</option>
                            <option value="Lashio (LSH)">Lashio (LSH)</option>
                            <option value="Loikaw (LIW)">Loikaw (LIW)</option>
                            <option value="Mae Sot (MAQ)">Mae Sot (MAQ)</option>
                            <option value="Manaung (MGU)">Manaung (MGU)</option>
                            <option value="Mandalay (MDL)">Mandalay (MDL)</option>
                            <option value="Mangrere (AKL)">Mangrere (AKL)</option>
                            <option value="Mangshi (LUM)">Mangshi (LUM)</option>
                            <option value="Manila (MNL)">Manila (MNL)</option>
                            <option value="Mawlamyaing (MNU)">Mawlamyaing (MNU)</option>
                            <option value="Melbourne (MEL)">Melbourne (MEL)</option>
                            <option value="Monghsat (MOG)">Monghsat (MOG)</option>
                            <option value="Monywa (NYW)">Monywa (NYW)</option>
                            <option value="Mumbai (BOM)">Mumbai (BOM)</option>
                            <option value="Myeik (MGZ)">Myeik (MGZ)</option>
                            <option value="Myitkyina (MYT)">Myitkyina (MYT)</option>
                            <option value="Nagoya (NGO)">Nagoya (NGO)</option>
                            <option value="Naming (NMS)">Naming (NMS)</option>
                            <option value="Nanning (NNG)">Nanning (NNG)</option>
                            <option value="Nay Pyi Taw (NYT)">Nay Pyi Taw (NYT)</option>
                            <option value="Nyaung U (NYU)">Nyaung U (NYU)</option>
                            <option value="Phuket (HKT)">Phuket (HKT)</option>
                            <option value="Putao (PBU)">Putao (PBU)</option>
                            <option value="Siem Reap (SAI)">Siem Reap (SAI)</option>
                            <option value="Singapore (SIN)">Singapore (SIN)</option>
                            <option value="Sittwe (AKY)">Sittwe (AKY)</option>
                            <option value="Subang (SZB)">Subang (SZB)</option>
                            <option value="Surbung (SRU)">Surbung (SRU)</option>
                            <option value="Sydney (SYD)">Sydney (SYD)</option>
                            <option value="Tachilek (THL)">Tachilek (THL)</option>
                            <option value="Taipei (TPE)">Taipei (TPE)</option>
                            <option value="Thandwe (SNW)">Thandwe (SNW)</option>
                            <option value="Tokyo - Narita (NRT)">Tokyo - Narita (NRT)</option>
                            <option value="Vientiane (VTE)">Vientiane (VTE)</option>
                            <option value="Xiamen (XMN)">Xiamen (XMN)</option>
                            <option value="Yangon (RGN)">Yangon (RGN)</option>
                        </select></div>
                           <div class="form-group"><label for="booking_destination">Destination</label><select id="booking_destination" required><option value="" disabled selected>Select Destination</option>
                            <option value="Ann (VBA)">Ann (VBA)</option>
                            <option value="Anni Sakhan (VBK)">Anni Sakhan (VBK)</option>
                            <option value="Bangalore (BLR)">Bangalore (BLR)</option>
                            <option value="Bangkok (BKK)">Bangkok (BKK)</option>
                            <option value="Bassein (BSX)">Bassein (BSX)</option>
                            <option value="Bhamo (BMO)">Bhamo (BMO)</option>
                            <option value="Bokpyin (VBP)">Bokpyin (VBP)</option>
                            <option value="Brisbane (BNE)">Brisbane (BNE)</option>
                            <option value="Busan (PUS)">Busan (PUS)</option>
                            <option value="Chengdu (CTU)">Chengdu (CTU)</option>
                            <option value="Chaing Mai (CNX)">Chaing Mai (CNX)</option>
                            <option value="Coco Islands (VCC)">Coco Islands (VCC)</option>
                            <option value="Colombo (CMB)">Colombo (CMB)</option>
                            <option value="Cox's bazar (CXB)">Cox's bazar (CXB)</option>
                            <option value="Dawei (TVY)">Dawei (TVY)</option>
                            <option value="Denpasar (DPS)">Denpasar (DPS)</option>
                            <option value="Dhaka (DAC)">Dhaka (DAC)</option>
                            <option value="Fukuoka (FUK)">Fukuoka (FUK)</option>
                            <option value="Gaya (GAY)">Gaya (GAY)</option>
                            <option value="Haikou (HAK)">Haikou (HAK)</option>
                            <option value="Hanoi (HAN)">Hanoi (HAN)</option>
                            <option value="Heho (HEH)">Heho (HEH)</option>
                            <option value="Ho Chi Minh City (SGN)">Ho Chi Minh City (SGN)</option>
                            <option value="Hommalinn (HOX)">Hommalinn (HOX)</option>
                            <option value="Hong Kong (HKG)">Hong Kong (HKG)</option>
                            <option value="Incheon (ICN)">Incheon (ICN)</option>
                            <option value="Jakarta (CGK)">Jakarta (CGK)</option>
                            <option value="Kalemyo (KMV)">Kalemyo (KMV)</option>
                            <option value="Kawtung (KET)">Kawtung (KET)</option>
                            <option value="Khamti (KHM)">Khamti (KHM)</option>
                            <option value="Kolkata (CCU)">Kolkata (CCU)</option>
                            <option value="Krabi (KBV)">Krabi (KBV)</option>
                            <option value="Kuala Lumpur (KUL)">Kuala Lumpur (KUL)</option>
                            <option value="Kumming (KMG)">Kumming (KMG)</option>
                            <option value="Kyaukpyu (KYP)">Kyaukpyu (KYP)</option>
                            <option value="Lashio (LSH)">Lashio (LSH)</option>
                            <option value="Loikaw (LIW)">Loikaw (LIW)</option>
                            <option value="Mae Sot (MAQ)">Mae Sot (MAQ)</option>
                            <option value="Manaung (MGU)">Manaung (MGU)</option>
                            <option value="Mandalay (MDL)">Mandalay (MDL)</option>
                            <option value="Mangrere (AKL)">Mangrere (AKL)</option>
                            <option value="Mangshi (LUM)">Mangshi (LUM)</option>
                            <option value="Manila (MNL)">Manila (MNL)</option>
                            <option value="Mawlamyaing (MNU)">Mawlamyaing (MNU)</option>
                            <option value="Melbourne (MEL)">Melbourne (MEL)</option>
                            <option value="Monghsat (MOG)">Monghsat (MOG)</option>
                            <option value="Monywa (NYW)">Monywa (NYW)</option>
                            <option value="Mumbai (BOM)">Mumbai (BOM)</option>
                            <option value="Myeik (MGZ)">Myeik (MGZ)</option>
                            <option value="Myitkyina (MYT)">Myitkyina (MYT)</option>
                            <option value="Nagoya (NGO)">Nagoya (NGO)</option>
                            <option value="Naming (NMS)">Naming (NMS)</option>
                            <option value="Nanning (NNG)">Nanning (NNG)</option>
                            <option value="Nay Pyi Taw (NYT)">Nay Pyi Taw (NYT)</option>
                            <option value="Nyaung U (NYU)">Nyaung U (NYU)</option>
                            <option value="Phuket (HKT)">Phuket (HKT)</option>
                            <option value="Putao (PBU)">Putao (PBU)</option>
                            <option value="Siem Reap (SAI)">Siem Reap (SAI)</option>
                            <option value="Singapore (SIN)">Singapore (SIN)</option>
                            <option value="Sittwe (AKY)">Sittwe (AKY)</option>
                            <option value="Subang (SZB)">Subang (SZB)</option>
                            <option value="Surbung (SRU)">Surbung (SRU)</option>
                            <option value="Sydney (SYD)">Sydney (SYD)</option>
                            <option value="Tachilek (THL)">Tachilek (THL)</option>
                            <option value="Taipei (TPE)">Taipei (TPE)</option>
                            <option value="Thandwe (SNW)">Thandwe (SNW)</option>
                            <option value="Tokyo - Narita (NRT)">Tokyo - Narita (NRT)</option>
                            <option value="Vientiane (VTE)">Vientiane (VTE)</option>
                            <option value="Xiamen (XMN)">Xiamen (XMN)</option>
                            <option value="Yangon (RGN)">Yangon (RGN)</option>
                        </select></div>
                           <div class="form-group"><label for="booking_departing_on">Travel Date</label><input type="text" id="booking_departing_on" placeholder="MM/DD/YYYY" required></div>
                           <div class="form-group"><label for="booking_pax_no">Pax No.</label><input type="number" id="booking_pax_no" required min="1" value="1"></div>
                        </div>
                        <div class="form-actions">
                           <button type="button" class="btn btn-secondary" id="cancelNewBookingBtn"><i class="fa-solid fa-xmark"></i> Cancel</button>
                           <button type="submit" class="btn btn-primary"><i class="fa-solid fa-check"></i> Save Booking</button>
                        </div>
                    </form>
                </div>

                <div id="booking-display-container" class="results-section glass-card">
                     <div class="table-header">
                        <h3><i class="fa-solid fa-calendar-check"></i> Booking Requests</h3>
                        <div class="table-controls">
                           <button id="newBookingBtn" class="btn btn-primary"><i class="fa-solid fa-plus"></i> New Booking</button>
                        </div>
                    </div>
                    <div class="booking-search-section">
                        <select id="bookingSearchRoute">
                            <option value="">-- SEARCH BY ROUTE --</option>
                        </select>
                        <button id="bookingSearchBtn" class="btn btn-primary"><i class="fa-solid fa-search"></i></button>
                        <button id="bookingClearBtn" class="btn btn-secondary"><i class="fa-solid fa-eraser"></i></button>
                    </div>
                    <div class="table-container">
                        <table id="bookingTable">
                            <thead>
                                <tr>
                                    <th>Travel Date</th>
                                    <th>Client Name</th>
                                    <th>Route</th>
                                    <th>Pax</th>
                                    <th>Get Ticket</th>
                                    <th>Cancel</th>
                                    <th>Details</th>
                                </tr>
                            </thead>
                            <tbody id="bookingTableBody">
                                <tr><td colspan="7" style="text-align:center;">Loading bookings...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="bookingPagination" class="pagination-container"></div>
                </div>
            </section>

            <section id="sell-view" class="view">
                <div class="form-container glass-card">
                   <div class="form-header">
                       <h2><i class="fa-solid fa-ticket"></i> Sell New Ticket(s)</h2>
                       <div class="flight-type-toggle">
                           <span id="domestic-label">Domestic</span>
                           <label class="switch">
                               <input type="checkbox" id="flightTypeToggle">
                               <span class="slider round"></span>
                           </label>
                           <span id="international-label">International</span>
                       </div>
                   </div>
                   <form id="sellForm">
                       <div class="form-grid">
                           <div class="form-group"><label for="issued_date">Issued Date</label><input type="text" id="issued_date" placeholder="MM/DD/YYYY" required></div>
                           <div class="form-group"><label for="booking_reference">PNR Code</label><input type="text" id="booking_reference" required></div>
                           <div class="form-group"><label for="phone">Contact Phone</label><input type="tel" id="phone" required></div>
                           <div class="form-group"><label for="account_name">Social Media Account Name</label><input type="text" id="account_name" required></div>
                           <div class="form-group"><label for="account_type">Social Media Account Type</label><select id="account_type" required><option value="" disabled selected>Select Account Type</option><option value="Facebook Page">Facebook Page</option><option value="Messenger">Messenger</option><option value="Viber">Viber</option><option value="Telegram">Telegram</option><option value="WeChat">WeChat</option><option value="Phone">Phone</option></select></div>
                           <div class="form-group"><label for="account_link">Account Link</label><input type="text" id="account_link" placeholder="URL, phone number or @username"></div>
                           <div class="form-group"><label for="departure">Departure</label><select id="departure" required><option value="" disabled selected>Select Departure</option></select></div>
                           <div class="form-group"><label for="destination">Destination</label><select id="destination" required><option value="" disabled selected>Select Destination</option></select></div>
                           <div class="form-group"><label for="departing_on">Travel Date</label><input type="text" id="departing_on" placeholder="MM/DD/YYYY" required></div>
                           <div class="form-group">
                               <label for="airline">Airline</label>
                               <select id="airline" required>
                                   <option value="" disabled selected>Select Airline</option>
                                   <option value="MNA">MNA</option>
                                   <option value="MAI">MAI</option>
                                   <option value="ManYadanarpon">ManYadanarpon</option>
                                   <option value="AirThanwlin">AirThanwlin</option>
                                   <option value="CUSTOM">CUSTOM</option>
                               </select>
                           </div>
                           <div class="form-group" id="custom_airline_group" style="display: none;"><label for="custom_airline">Custom Airline Name</label><input type="text" id="custom_airline"></div>
                           <div class="form-group"><label for="payment_method">Payment Method</label><select id="payment_method"><option value="">Select Payment Method</option><option value="KBZ Pay">KBZ Pay</option><option value="Mobile Banking">Mobile Banking</option><option value="Aya Pay">Aya Pay</option><option value="Cash">Cash</option></select></div>
                           <div class="form-group"><label for="paid_date">Paid Date</label><input type="text" id="paid_date" placeholder="MM/DD/YYYY"></div>
                           <div class="form-group checkbox-group"><label for="paid">Paid</label><input type="checkbox" id="paid"></div>
                       </div>
                       <hr style="border-color: rgba(255,255,255,0.2); margin: 1.5rem 0;">
                       <div id="passenger-forms-container">
                           <div class="passenger-form">
                               <h4>Passenger 1</h4>
                               <div class="form-grid">
                                   <div class="form-group"><label>Client Name</label><input type="text" class="passenger-name" required></div>
                                   <div class="form-group"><label>ID Number</label><input type="text" class="passenger-nrc" required></div>
                                   <div class="form-group"><label>Base Fare (MMK)</label><input type="number" class="passenger-base-fare" step="1" required></div>
                                   <div class="form-group"><label>Net Amount (MMK)</label><input type="number" class="passenger-net-amount" step="1" required></div>
                                   <div class="form-group"><label>Extra Fare (Optional)</label><input type="number" class="passenger-extra-fare" step="1"></div>
                                   <div class="form-group"><label>Commission</label><input type="number" class="passenger-commission" step="1" readonly></div>
                                   <div class="form-group"><label>Remarks (Optional)</label><textarea class="passenger-remarks" rows="1"></textarea></div>
                               </div>
                           </div>
                       </div>
                       <div class="form-actions" style="justify-content: flex-start; margin-top: 1rem;">
                           <button type="button" class="btn btn-secondary" id="addPassengerBtn"><i class="fa-solid fa-plus"></i> Add Passenger</button>
                           <button type="button" class="btn btn-secondary" id="removePassengerBtn" style="display: none;"><i class="fa-solid fa-minus"></i> Remove Last</button>
                       </div>

                       <div class="form-actions" style="margin-top: 2rem;">
                           <button type="button" class="btn btn-secondary" onclick="showView('home')"><i class="fa-solid fa-xmark"></i> Cancel</button>
                           <button type="submit" class="btn btn-primary"><i class="fa-solid fa-check"></i> Submit Ticket(s)</button>
                       </div>
                   </form>
               </div>
           </section>
            
            <section id="modify-view" class="view">
                 <div class="form-container glass-card">
                    <h2><i class="fa-solid fa-pen-to-square"></i> Modify Ticket</h2>
                    <form class="centered-form" onsubmit="return false;">
                        <div class="form-group">
                            <label for="modifyPnr">Enter PNR Code to Modify</label>
                            <input type="text" id="modifyPnr" name="modifyPnr" placeholder="e.g., BDUVUU">
                        </div>
                        <div class="form-actions">
                            <button id="findTicketBtn" type="button" class="btn btn-primary"><i class="fa-solid fa-magnifying-glass"></i> Find Ticket</button>
                            <button id="clearModifyBtn" type="button" class="btn btn-secondary"><i class="fa-solid fa-eraser"></i> Clear</button>
                        </div>
                    </form>
                    <div id="modifyResultsContainer" class="results-section" style="padding: 1rem 0 0 0; background: transparent; border: none; box-shadow: none;"></div>
                    
                    <div id="modificationHistoryContainer" class="results-section glass-card" style="margin-top: 2rem; display: none;">
                        <h3><i class="fa-solid fa-clock-rotate-left"></i> Modification History</h3>
                        <div class="table-container">
                            <table id="modificationHistoryTable">
                                <thead>
                                    <tr><th>Date</th><th>Name</th><th>Booking Ref</th><th>Details</th></tr>
                                </thead>
                                <tbody id="modificationHistoryBody"></tbody>
                            </table>
                        </div>
                        <div id="modificationHistoryPagination" class="pagination-container"></div>
                    </div>
                </div>
            </section>

            <section id="cancel-view" class="view">
                <div class="form-container glass-card">
                    <h2><i class="fa-solid fa-ban"></i> Cancel Ticket</h2>
                     <form class="centered-form" onsubmit="return false;">
                        <div class="form-group">
                            <label for="cancelPnr">Enter PNR Code to Cancel</label>
                            <input type="text" id="cancelPnr" name="cancelPnr" placeholder="e.g., BDUVUU">
                        </div>
                        <div class="form-actions">
                            <button id="findCancelBtn" type="button" class="btn btn-primary"><i class="fa-solid fa-ban"></i> Find & Cancel</button>
                            <button id="clearCancelBtn" type="button" class="btn btn-secondary"><i class="fa-solid fa-eraser"></i> Clear</button>
                        </div>
                    </form>
                    <div id="cancelResultsContainer" class="results-section" style="padding: 1rem 0 0 0; background: transparent; border: none; box-shadow: none;"></div>

                    <div id="cancellationHistoryContainer" class="results-section glass-card" style="margin-top: 2rem; display: none;">
                        <h3><i class="fa-solid fa-clock-rotate-left"></i> Cancellation History</h3>
                        <div class="table-container">
                            <table id="cancellationHistoryTable">
                                <thead>
                                    <tr><th>Date</th><th>Name</th><th>Booking Ref</th><th>Details</th></tr>
                                </thead>
                                <tbody id="cancellationHistoryBody"></tbody>
                            </table>
                        </div>
                        <div id="cancellationHistoryPagination" class="pagination-container"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="settings-panel" class="glass-card settings-panel solid-bg">
        <h3 class="settings-title">UI Customization</h3>
        <div class="settings-grid">
            <div class="setting-item">
                <div class="setting-label-group">
                    <label for="opacity-slider">Opacity</label>
                    <span id="opacity-value">0.05</span>
                </div>
                <input type="range" id="opacity-slider" min="0" max="0.3" step="0.01">
            </div>
            <div class="setting-item">
                <div class="setting-label-group">
                    <label for="blur-slider">Blur</label>
                    <span id="blur-value">20</span>
                </div>
                <input type="range" id="blur-slider" min="0" max="50" step="1">
            </div>
            <div class="setting-item">
                <div class="setting-label-group">
                    <label for="overlay-slider">Dark Overlay</label>
                    <span id="overlay-value">0.5</span>
                </div>
                <input type="range" id="overlay-slider" min="0" max="0.9" step="0.01">
            </div>
            <div class="setting-item">
                <div class="setting-label-group">
                    <label for="glass-slider">Glass Border</label>
                    <span id="glass-value">0.15</span>
                </div>
                <input type="range" id="glass-slider" min="0" max="1" step="0.01">
            </div>
        </div>
        <button id="reset-settings-btn" class="btn btn-secondary">Reset</button>
    </div>
    
    <div id="modal" class="modal"><div class="modal-content glass-card"><span class="close" onclick="closeDetailsModal()">&times;</span><div id="modalBody"></div></div></div>
    <div id="modifyModal" class="modal"><div class="modal-content glass-card"><span id="closeModifyModal" class="close">&times;</span><div id="modifyModalBody"></div></div></div>
    <div id="cancelModal" class="modal"><div class="modal-content glass-card"><span class="close">&times;</span><div id="cancelModalBody"></div></div></div>
    <div id="bookingDetailModal" class="modal"><div class="modal-content glass-card"><span class="close">&times;</span><div id="bookingDetailModalBody"></div></div></div>
    <div id="bookingConfirmModal" class="modal"><div class="modal-content glass-card small-modal"><div id="bookingConfirmModalBody"></div></div></div>
    <div id="sellConfirmModal" class="modal"><div class="modal-content glass-card"><div id="sellConfirmModalBody"></div></div></div>

    <div id="toast"><span id="toastMessage"></span></div>

    <script src="script.js"></script>
</body>
</html>
